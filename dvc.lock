schema: '2.0'
stages:
  prepare:
    cmd: python -m mates.modeling.prepare
    deps:
    - path: data/raw/labels.csv
      hash: md5
      md5: ebee41cd1271c6ea9d3b54f6dd8531ce
      size: 482063
      isexec: true
    - path: data/raw/test
      hash: md5
      md5: 93e54535952a6b266546a86c00140112.dir
      size: 363049350
      nfiles: 10357
    - path: data/raw/train
      hash: md5
      md5: 579bdd4abc67bb771a1b19f831387360.dir
      size: 361700370
      nfiles: 10222
    - path: mates/modeling/prepare.py
      hash: md5
      md5: 7552d07d01db7b248cdc86ca04f76d8b
      size: 1453
      isexec: true
    params:
      params.yaml:
        prepare.is_train: true
        prepare.save_processed: true
        prepare.seed: 42
        prepare.split_size: 0.3
    outs:
    - path: data/processed/X_train.pkl
      hash: md5
      md5: 8b9390e68cae6319ce9ac1d2c3fe59c0
      size: 529668
      isexec: true
    - path: data/processed/X_valid.pkl
      hash: md5
      md5: 774acd2dee202badac800c10ebbddae1
      size: 227103
      isexec: true
    - path: data/processed/output_shape.pkl
      hash: md5
      md5: a23f97d662b4cf358458561f819839fe
      size: 5
      isexec: true
    - path: data/processed/y_train.pkl
      hash: md5
      md5: cb88937c8de0e9daafe458746dfc9f77
      size: 858762
      isexec: true
    - path: data/processed/y_valid.pkl
      hash: md5
      md5: e3dc06e769617b526db89a0c5b2d479a
      size: 368202
      isexec: true
  train:
    cmd: python -m mates.modeling.train
    deps:
    - path: data/processed/X_train.pkl
      hash: md5
      md5: 8b9390e68cae6319ce9ac1d2c3fe59c0
      size: 529668
      isexec: true
    - path: data/processed/X_valid.pkl
      hash: md5
      md5: 774acd2dee202badac800c10ebbddae1
      size: 227103
      isexec: true
    - path: data/processed/output_shape.pkl
      hash: md5
      md5: a23f97d662b4cf358458561f819839fe
      size: 5
      isexec: true
    - path: data/processed/y_train.pkl
      hash: md5
      md5: cb88937c8de0e9daafe458746dfc9f77
      size: 858762
      isexec: true
    - path: data/processed/y_valid.pkl
      hash: md5
      md5: e3dc06e769617b526db89a0c5b2d479a
      size: 368202
      isexec: true
    - path: mates/modeling/train.py
      hash: md5
      md5: ffa20c1b50a59a1aaf8cd03d7b8cea71
      size: 4587
      isexec: true
    params:
      params.yaml:
        train.batch_size: 32
        train.epochs: 10
        train.experiment_name: feture_mobilenet_batch_32
        train.metrics:
        - accuracy
        train.model_name: mobilenet
        train.model_url: 
          https://www.kaggle.com/models/google/mobilenet-v2/TensorFlow2/130-224-feature-vector/2
        train.monitor: val_accuracy
        train.optimizer: adam
        train.patience: 5
        train.save_model: true
    outs:
    - path: models/
      hash: md5
      md5: e2a9da0d270772b9bbfb40a60b074ba8.dir
      size: 17720056
      nfiles: 1
